# ESP32 controlled plant watering with Influx Monitoring
This project aims to water my plants, while I am away. The ESP checks a water level sensor, if there is water in a bucket or tank and checks the moisture of the soil. 
If necessary the ESP32 triggers an GPIO which is attached to a relay which powers a pump.

## Sending data to influx
We are measuring data once every cycle.
The `measurement`-Struct is "pushing" these data down a list generated by `Qlist`.
This all happens while being offline - being fully dependend on the RTC after syncing with a Time Server.
After (by default 5) some cycles we connect to the WiFi and push the list to `influxdb`. This saves a lot of energy, as we don't have to connect to the wifi in every cycle. 
Not my idea, not my code. Based on the [humidity-probe-infludb](https://github.com/AlbertWeichselbraun/humidity-probe-influxdb) project by (Albert Weichselbraun)[https://github.com/AlbertWeichselbraun]


## Sleep
There is not really any need to use `light_sleep` or `deep_sleep` here, as the whole setup is not battery powered.
But as it's possible I'll try to make use of the `deep_sleep` - which is not working right now.


## OTA
I copied the code from the [official espressif OTA examples at github](https://github.com/espressif/arduino-esp32/blob/master/libraries/Update/examples/AWS_S3_OTA_Update/AWS_S3_OTA_Update.ino).


## Sources
* [ESP32 influxdb linked lists](https://github.com/AlbertWeichselbraun)
* [ESP32 OTA by espressif](https://github.com/espressif/arduino-esp32/blob/master/libraries/Update/examples/AWS_S3_OTA_Update/AWS_S3_OTA_Update.ino)